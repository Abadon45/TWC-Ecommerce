{% load static %}
{% load url_with_domain %}
{% load currency_filters %}

<header class="header">

    <!-- header top -->
    <div class="header-top">
        <div class="container">
            <div class="header-top-wrapper">
                {% if user.is_authenticated and user.is_superuser %}
                    <div class="row">
                        <div class="col-12 col-md-6 col-lg-6 col-xl-5">
                            <div class="header-top-left">
                                <ul class="header-top-list">
                                    {% if settings.IS_PRODUCTION %}
                                        <li><a href="admin.twconline.store"><i class="fa-solid fa-user-secret"></i></i>
                                            ADMIN</a>
                                        </li>
                                    {% else %}
                                        <li><a href="admin.twconline.store:8000"><i
                                                class="fa-solid fa-user-secret"></i></i>ADMIN</a></li>
                                    {% endif %}
                                </ul>
                            </div>
                        </div>
                        {#                    <div class="col-12 col-md-6 col-lg-6 col-xl-7 mobile-hidden">#}
                        {#                        <div class="header-top-right">#}
                        {#                            <ul class="header-top-list">#}
                        {#                                <li><a href="{% url_with_domain 'products:product_list' %}"><i#}
                        {#                                            class="fa-solid fa-code-compare"></i> Product List</a></li>#}
                        {#                                <li><a href="{% url_with_domain 'products:add_product' %}"><i#}
                        {#                                            class="fa-solid fa-keyboard"></i> Add Products</a></li>#}
                        {#                                {% if user.is_authenticated %}#}
                        {#                                <li class="login"><a href="{% url_with_domain 'login:logout' %}"><i#}
                        {#                                            class="far fa-arrow-right-to-arc"></i> Logout</a></li>#}
                        {#                                {% else %}#}
                        {#                                <li class="login"><a href="{% url_with_domain 'login:login' %}"><i#}
                        {#                                            class="far fa-arrow-right-to-arc"></i> Login</a></li>#}
                        {#                                {% endif %}#}
                        {#                            </ul>#}
                        {#                        </div>#}
                        {#                    </div>#}
                    </div>
                {% else %}
                    <div class="row">
                        <div class="col-12 col-md-6 col-lg-6 col-xl-5">
                            <div class="header-top-left">
                                <!-- <ul class="header-top-list">
                                    <li><a href="mailto:info@example.com"><i class="far fa-envelopes"></i>
                                            info@example.com</a></li>
                                    <li><a href="tel:+21236547898"><i class="far fa-headset"></i> +2 123 654
                                            7898</a></li>
                                </ul> -->
                            </div>
                        </div>
                        {#                    <div class="col-12 col-md-6 col-lg-6 col-xl-7 mobile-hidden">#}
                        {#                        <div class="header-top-right">#}
                        {#                            <ul class="header-top-list">#}
                        {#                                {% if user.is_authenticated %}#}
                        {#                                <li class="login"><a href="{% url_with_domain 'login:logout' %}">Logout</a></li>#}
                        {#                                {% else %}#}
                        {#                                <li class="login"><a href="{% url_with_domain 'login:login' %}">Login</a></li>#}
                        {#                                {% endif %}#}
                        {#                                <li class="social">#}
                        {#                                    <div class="header-top-social">#}
                        {#                                        <span>Follow Us: </span>#}
                        {#                                        <a href="#"><i class="fab fa-facebook"></i></a>#}
                        {#                                    </div>#}
                        {#                                </li>#}
                        {#                            </ul>#}
                        {#                        </div>#}
                        {#                    </div>#}
                    </div>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- header main navigation -->
    <div class="main-navigation">
        <nav class="navbar navbar-expand-lg">
            <div class="container header-container">
                <div class="row">
                    <div class="col-lg-3 col-md-2 col-5">
                        <a class="navbar-brand" href="{{ MAIN_SITE_URL }}">
                            <img src="{% static 'img/logo/logo.png' %}" alt="logo">
                        </a>
                    </div>
                    <div class="col-7 mobile-only">
                        <div class="header-top-right">
                            <ul class="header-top-list">
                                {% if user.is_authenticated %}
                                    <li class="login"><a href="{% url_with_domain 'login:logout' %}">Logout</a></li>
                                {% else %}
                                    <li class="login"><a href="{% url_with_domain 'login:login' %}">Login</a></li>
                                {% endif %}
                                <li class="social">
                                    <div class="header-top-social">
                                        <span>Follow Us: </span>
                                        <a href="#"><i class="fab fa-facebook"></i></a>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-lg-5 col-md-5 col-10" style="margin: auto;">
                        <div class="header-middle-search">
                            <form method="get" action="{% url 'shop:search' %}">
                                <div class="search-content">
                                    <input type="text" class="form-control" name="q" placeholder="Search Here...">
                                    <button type="submit" class="search-btn"><i class="far fa-search"></i></button>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="col-md-4 col-sm-6 col-2 navigation-col" style="align-content: center;">
                        <div class="mobile-menu-right">
                            <!-- <div class="search-btn">
                                <button type="button" class="nav-right-link"><i class="far fa-search"></i></button>
                                <div class="mobile-search-form">
                                    <form method="get" action="{% url 'shop:search' %}">
                                        <input type="text" class="form-control" name="q" placeholder="Search Here...">
                                        <button type="submit"><i class="far fa-search"></i></button>
                                    </form>
                                </div>
                            </div> -->
                            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#menu_nav" aria-expanded="false" aria-label="Toggle navigation">
                                <span class="navbar-toggler-mobile-icon"><i class="far fa-bars"></i></span>
                            </button>
                        </div>
                        <div class="collapse navbar-collapse d-flex justify-content-end" id="menu_nav">
                            <ul class="navbar-nav header-list">
                                <li class="nav-item"><a class="nav-link"
                                                        href="{% url_with_domain 'home_view' %}">Home</a></li>
                                <li class="nav-item"><a class="nav-link"
                                                        href="{% url_with_domain 'shop:shop' %}">Shop</a></li>
                                {% if user.is_authenticated %}
                                    <li class="nav-item dropdown">
                                        <a class="nav-link dropdown-toggle active" href="#" data-bs-toggle="dropdown">My
                                            Account</a>
                                        <ul class="dropdown-menu fade-down">
                                            <li><a class="dropdown-item" href="{{ DASHBOARD_URL }}" class="list-item">My
                                                Profile</a></li>
                                            {% if referrer %}
                                                <li>
                                                    <a class="dropdown-item"
                                                       href="{{ referrer }}"
                                                       id="user-chat-seller">
                                                        Chat With Seller</a>
                                                </li>
                                            {% endif %}
                                            {% if user.is_seller %}
                                                <li><a class="dropdown-item" href="{{ DASHBOARD_URL|add:'/seller' }}">Seller
                                                    Dashboard</a></li>
                                            {% endif %}
                                            {% if user.is_staff %}
                                                <li><a class="dropdown-item"
                                                       href="{{ DASHBOARD_URL|add:'/logistics' }}">Logistics
                                                    Dashboard</a></li>
                                            {% endif %}
                                            {% if user.is_supplier %}
                                                <li><a class="dropdown-item" href="{{ DASHBOARD_URL|add:'/supplier' }}">Supplier
                                                    Dashboard</a></li>
                                            {% endif %}
                                        </ul>
                                    </li>
                                {% endif %}
                                <li class="cart-link nav-item dropdown-cart mobile-hidden">
                                    <a href="{% url_with_domain 'cart:cart' %}" class="nav-link shop-cart list-item"><i
                                            class="far fa-shopping-bag"></i>
                                        <span id="upper-cart-count">{{ cart_items }}</span></a>
                                    <div id="cart-dropdown">
                                        {% if cart_items %}
                                            <div class="dropdown-cart-menu">
                                                <div class="dropdown-cart-header">
                                                <span class="cart-items-count">{{ cart_items|stringformat:"02d" }}
                                                    Items</span>
                                                    <a href="{% url_with_domain 'cart:cart' %}">View Cart</a>
                                                </div>
                                                <ul id="dropdown-cart-list">
                                                    {% for order, items in order_products.items %}
                                                        {% for item in items %}
                                                            <li id="cart-row-{{ item.product.id }}">
                                                                <div class="dropdown-cart-item">
                                                                    <div class="cart-img">
                                                                        <a href="{% url 'shop:single' slug=item.product.slug %}">
                                                                            {% if item.product.image_1 %}
                                                                                {% if item.product.image_1 %}
                                                                                    <img src="{{ item.product.image_1 }}"
                                                                                         alt="{{ item.product.name }}">
                                                                                {% else %}
                                                                                    <img src="{% static 'img/product/default-product-image.png' %}"
                                                                                         alt="{{ item.product.name }}">
                                                                                {% endif %}
                                                                            {% else %}
                                                                                <img src="{% static 'img/product/default-product-image.png' %}"
                                                                                     alt="{{ item.product.name }}">
                                                                            {% endif %}
                                                                        </a>
                                                                    </div>
                                                                    <div class="cart-info">
                                                                        <h4><a
                                                                                href="{% url 'shop:single' slug=item.product.slug %}">{{ item.product.name }}</a>
                                                                        </h4>
                                                                        <p class="cart-qty">{{ item.quantity }}x - <span
                                                                                class="cart-amount">{{ item.subtotal|currency }}</span>
                                                                        </p>
                                                                    </div>
                                                                    <a href="#" data-product="{{ item.product.slug }}"
                                                                       data-action="remove"
                                                                       class="update-cart shop-cart-remove">
                                                                        <i class="far fa-times-circle"></i>
                                                                    </a>
                                                                </div>
                                                            </li>
                                                        {% endfor %}
                                                    {% endfor %}
                                                </ul>
                                                <div class="dropdown-cart-bottom">
                                                    <div class="dropdown-cart-total">
                                                        <span>Total</span>
                                                        <span class="total-amount">{{ total_cart_subtotal|currency }}</span>
                                                    </div>
                                                    <a href="{% url_with_domain 'cart:cart' %}"
                                                       class="theme-btn">Checkout</a>
                                                </div>
                                            </div>
                                        {% endif %}
                                    </div>
                                </li>
                                {#                                {% if not user.is_seller %}#}
                                {#                                <div class="nav-right">#}
                                {#                                    <div class="nav-right-btn">#}
                                {#                                        <a href="{% url_with_domain 'become_seller' %}" class="theme-btn">Become#}
                                {#                                            Seller</a>#}
                                {#                                    </div>#}
                                {#                                </div>#}
                                {#                                {% endif %}#}
                            </ul>
                        </div>
                    </div>
                    <div class="col-2 toggler mobile-only">
                        <div class="container-fluid">
                            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#navbarNavDarkDropdown" aria-controls="navbarNavDarkDropdown"
                                    aria-expanded="false" aria-label="Toggle navigation">
                                <span class="navbar-toggler-icon"></span>
                            </button>
                        </div>
                    </div>
                    <div class="col-12 navbar-column mobile-only">
                        <div class="collapse navbar-collapse" id="navbarNavDarkDropdown">
                            <ul class="navbar-nav">
                                <li class="nav-item dropdown">
                                    <a class="nav-link dropdown-toggle" href="#" id="navbarDarkDropdownMenuLink"
                                       role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                        <ul class="navbar-nav header-list">
                                            <li class="nav-item">
                                                <a class="nav-link" href="{% url_with_domain 'home_view' %}">Home</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" href="{% url_with_domain 'shop:shop' %}">Shop</a>
                                            </li>
                                            {% if user.is_authenticated %}
                                                <li class="nav-item dropdown">
                                                    <a class="nav-link" href="{{ DASHBOARD_URL }}">
                                                        My Account
                                                    </a>
                                                </li>
                                            {% endif %}
                                            {% if not user.is_seller %}
                                                <li class="nav-item">
                                                    <a href="{% url_with_domain 'become_seller' %}"
                                                       class="theme-btn nav-link become-seller">Become
                                                        Seller</a>
                                                </li>
                                            {% endif %}
                                        </ul>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
    </div>

</header>